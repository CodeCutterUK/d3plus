(function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("d3-color"),require("d3-scale")):"function"==typeof define&&define.amd?define("d3plus-color",["exports","d3-color","d3-scale"],n):n(e.d3plus_color={},e.d3_color,e.d3_scale)})(this,function(e,n,r){"use strict";function i(e,r,i,o){void 0===i&&(i=1),void 0===o&&(o=1),e=n.hsl(e),r=n.hsl(r);var s=Math.abs(r.h*o-e.h*i);s>180&&(s-=360);var l=(Math.min(e.h,r.h)+s/2)%360,t=e.s+(r.s*o-e.s*i)/2,c=e.l+(r.l*o-e.l*i)/2;return 0>l&&(l=360+l),""+n.hsl("hsl("+[l,100*t+"%",100*c+"%"].join(",")+")")}function o(e,n){return e in n?n[e]:u[e]}function s(e,r){if(void 0===r&&(r={}),[null,void 0].indexOf(e)>=0)return o("missing",r);if(e===!0)return o("on",r);if(e===!1)return o("off",r);var i=n.color(e);return i?""+e:o("scale",r)(e)}function l(e,n){return e in n?n[e]:u[e]}function t(e,r){void 0===r&&(r={}),e=n.rgb(e);var i=(299*e.r+587*e.g+114*e.b)/1e3;return i>=128?l("dark",r):l("light",r)}function c(e){return e=n.hsl(e),e.l>.45&&(e.s>.8&&(e.s=.8),e.l=.45),""+e}function f(e,r){return void 0===r&&(r=.5),e=n.hsl(e),r=(1-e.l)*r,e.l+=r,e.s-=r,""+e}function d(e,r,i,o){void 0===i&&(i=1),void 0===o&&(o=1),e=n.hsl(e),r=n.hsl(r);var s=r.h*o-e.h*i;Math.abs(s)>180&&(s-=360);var l=(e.h-s)%360,t=e.s-(r.s*o-e.s*i)/2,c=e.l-(r.l*o-e.l*i)/2;return 0>l&&(l=360+l),""+n.hsl("hsl("+[l,100*t+"%",100*c+"%"].join(",")+")")}var a="0.2.3",u={dark:"#444444",light:"#f7f7f7",missing:"#cccccc",off:"#b22200",on:"#224f20",scale:r.scaleOrdinal().range(["#b22200","#eace3f","#282f6b","#b35c1e","#224f20","#5f487c","#759143","#419391","#993c88","#e89c89","#ffee8d","#afd5e8","#f7ba77","#a5c697","#c5b5e5","#d1d392","#bbefd0","#e099cf"])};e.version=a,e.add=i,e.assign=s,e.contrast=t,e.defaults=u,e.legible=c,e.lighter=f,e.subtract=d});