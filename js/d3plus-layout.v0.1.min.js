!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3plus-color"),require("d3"),require("d3plus-shape")):"function"==typeof define&&define.amd?define("d3plus-layout",["exports","d3plus-color","d3","d3plus-shape"],e):e(t.d3plus_layout={},t.d3plus_color,t.d3,t.d3plus_shape)}(this,function(t,e,n,r){"use strict";function i(t){return function(){return t}}function u(t,e){if(void 0===t.tagName||["BODY","HTML"].indexOf(t.tagName)>=0){var r=window["inner"+(e.charAt(0).toUpperCase()+e.slice(1))],i=n.select(t);return"width"===e?(r-=parseFloat(i.style("margin-left"),10),r-=parseFloat(i.style("margin-right"),10),r-=parseFloat(i.style("padding-left"),10),r-=parseFloat(i.style("padding-right"),10)):(r-=parseFloat(i.style("margin-top"),10),r-=parseFloat(i.style("margin-bottom"),10),r-=parseFloat(i.style("padding-top"),10),r-=parseFloat(i.style("padding-bottom"),10)),r}var r=parseFloat(n.select(t).style(e),10);return"number"==typeof r&&r>0?r:u(t.parentNode,e)}function o(t){var e=arguments.length<=1||void 0===arguments[1]?600:arguments[1];t.style("position",function(){var e=t.style("position"),n=["absolute","fixed"].indexOf(e)>=0;return n?e:"relative"});var n=u(t.node(),"height"),r=t.selectAll("svg").data([0]),i=u(t.node(),"width");return r.enter().append("svg"),r.attr("height",n+"px").attr("width",i+"px").selectAll("g").transition().duration(e).attr("opacity",0).remove(),{group:r.append("g"),height:n,width:i}}function a(t){return t.id}function l(t){return t.id}function s(t){return t.value}function d(){function t(t){return e.assign(m(t))}function u(t,e){return w(t)-w(e)}function d(){if(void 0===v&&(v=n.select("body"),p.push("select")),p.indexOf("select")>=0){var t=o(v,b);h=t.group,void 0===x&&(x=[t.width,t.height]),c.select(h.node())}var e=n.layout.treemap().size(x).sort(F).value(w).nodes({children:f}).filter(function(t){return!t.children&&t.area});c.data(e).fill(g).id(m).label(y).timing(b)(),p=[]}var f=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],c=r.rect().height(function(t){return t.dy}).x(function(t){return t.x+t.dx/2}).y(function(t){return t.y+t.dy/2}).width(function(t){return t.dx}),p=[],g=t,h=void 0,m=a,y=l,v=void 0,x=void 0,F=u,b=600,w=s;return d.data=function(t){return arguments.length?(f=t,d):f},d.fill=function(t){return arguments.length?(g="function"==typeof t?t:i(t),d):g},d.id=function(t){return arguments.length?(m=t,d):m},d.label=function(t){return arguments.length?(y="function"==typeof t?t:i(t),d):y},d.select=function(t){return arguments.length?(v=n.select(t),p.push("select"),d):v},d.sort=function(t){return arguments.length?(F=t,d):F},d.size=function(t){return arguments.length?(x=t,d):x},d.timing=function(t){return arguments.length?(b=t,d):b},d.value=function(t){return arguments.length?(w="function"==typeof t?t:i(t),d):w},f.length?d():d}n="default"in n?n["default"]:n;var f="0.1.1";t.version=f,t.treemap=d});